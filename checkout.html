<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Checkout</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</head>
<body>

<nav class="navbar navbar-expand-lg sticky-top" style="background-color: #e3f2fd;" data-bs-theme="light">
  <div class="container-fluid">
    <a class="navbar-brand" href="home.html">WeTicket</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarScroll">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarScroll">
      <ul class="navbar-nav me-auto navbar-nav-scroll" style="--bs-scroll-height: 100px;">
        <li class="nav-item"><a class="nav-link active" href="home.html">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="ticket1.html">Ticket</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Link</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Action</a></li>
            <li><a class="dropdown-item" href="#">Another action</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#">Something else here</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link disabled">Link</a></li>
      </ul>
      <form class="d-flex" role="search">
        <input class="form-control me-2" type="search" placeholder="Search" />
        <button class="btn btn-outline-success" type="submit">Search</button>
        <button type="button" class="btn btn-outline-danger ms-2" onclick="location.href='index.html'">Logout</button>
      </form>
    </div>
  </div>
</nav>

<div id="checkoutSection" class="container my-5"></div>

<div class="container py-5">
  <h3 class="text-center mb-4">üéüÔ∏è Choose Your Package</h3>
  <div class="row justify-content-center g-4" id="pricingTiers"></div>
</div>

<script>
  const params = new URLSearchParams(window.location.search);
  const raw = params.get("data");
  const place = raw ? JSON.parse(decodeURIComponent(raw)) : null;

  if (place) {
    const { name, province, description, price, image } = place;

    // Inject destination details
    const checkoutHTML = `
      <div class="row justify-content-center align-items-stretch" style="max-width: 80%; margin: auto;">
        <div class="col-md-5 p-0">
          <img src="${image}" alt="${name}" class="img-fluid w-100 h-100 object-fit-cover" style="min-height: 300px;">
        </div>
        <div class="col-md-7 d-flex flex-column justify-content-center px-4 py-3">
          <h6 class="text-primary fw-bold">${province}</h6>
          <h2 class="fw-semibold">${name}</h2>
          <p class="text-muted mb-2">‡∏ø${price} per person</p>
          <p>${description}</p>
          <a href="#" class="text-primary text-decoration-none fw-semibold">
            Learn more <i class="bi bi-arrow-right"></i>
          </a>
        </div>
      </div>
    `;
    document.getElementById("checkoutSection").innerHTML = checkoutHTML;

    // Pricing tiers
    const tiers = [
      {
        label: "Solo Traveler",
        people: 1,
        discount: 0,
        style: "outline-primary"
      },
      {
        label: "Couple Package",
        people: 2,
        discount: 0.10,
        style: "primary"
      },
      {
        label: "Family Package",
        people: 4,
        discount: 0.20,
        style: "success"
      }
    ];

    const pricingHTML = tiers.map(tier => {
      const total = price * tier.people * (1 - tier.discount);
      const perPerson = (total / tier.people).toFixed(2);
      return `
        <div class="col-md-4">
          <div class="border rounded-3 text-center p-4 h-100 ${tier.style === 'primary' ? 'bg-primary text-white' : ''}">
            <h5 class="fw-bold">${tier.label}</h5>
            <h2 class="my-3 ${tier.style === 'primary' ? 'text-white' : ''}">‡∏ø${total.toFixed(2)}</h2>
            <p class="mb-2">(${tier.people} person${tier.people > 1 ? 's' : ''})</p>
            <p class="text-muted mb-3">‡∏ø${perPerson} per person</p>
            <a href="#" class="btn btn-${tier.style} w-100">Select</a>
          </div>
        </div>
      `;
    }).join("");

    document.getElementById("pricingTiers").innerHTML = pricingHTML;
  } else {
    document.getElementById("checkoutSection").innerHTML = `<p class="text-center text-danger">No destination data found.</p>`;
  }
</script>

</body>
</html>